<!-- Same head/header/footer/JS as login.html -->
<section class="register-section pt-100 pb-100">
    <div class="container">
        <div class="row justify-content-center">
            <div class="col-lg-6">
                <form id="register-form">
                    <div class="form-group">
                        <label>نام</label>
                        <input type="text" id="firstname" required>
                    </div>
                    <div class="form-group">
                        <label>نام خانوادگی</label>
                        <input type="text" id="lastname" required>
                    </div>
                    <div class="form-group">
                        <label>شماره تلفن</label>
                        <input type="text" id="phonenumber" required>
                    </div>
                    <div class="form-group">
                        <label>رمز عبور</label>
                        <input type="password" id="password" required>
                    </div>
                    <div class="form-group">
                        <label>نقش</label>
                        <select id="role">
                            <option value="buyer">خریدار</option>
                            <option value="seller">فروشنده</option>
                            <option value="admin">مدیر</option>
                            <!-- Add other roles -->
                        </select>
                    </div>
                    <button type="submit" class="btn btn-primary">ثبت نام</button>
                </form>
            </div>
        </div>
    </div>
</section>
<script>
    window.addEventListener('load', updateNav);
    document.getElementById('register-form').addEventListener('submit', async (e) => {
        e.preventDefault();
        const data = {
            firstname: document.getElementById('firstname').value,
            lastname: document.getElementById('lastname').value,
            phonenumber: document.getElementById('phonenumber').value,
            password: document.getElementById('password').value,
            role: document.getElementById('role').value
        };
        try {
            await apiFetch('/register', 'POST', data);
            alert('ثبت نام موفق! لطفا وارد شوید.');
            window.location.href = 'login.html';
        } catch (err) {
            alert('خطا در ثبت نام: ' + err.message);
        }
    });
</script>